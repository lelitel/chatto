var countdown_interval,WARN=!1,n=document.URL.replace("https://","").replace("http://","").replace("/",""),socket=io(n,{auth:{token:ME.id}});function toggleFullScreen(){var e=window.document,t=e.documentElement;let a=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen,n=e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen;e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement?n.call(e):a.call(t)}function number_format(e,t,a,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var s,i,r,e=isFinite(+e)?+e:0,t=isFinite(+t)?Math.abs(t):0,n=void 0===n?" ":n,a=void 0===a?" ":a,o="";return 3<(o=(t?(s=e,i=t,r=Math.pow(10,i),""+(Math.round(s*r)/r).toFixed(i)):""+Math.round(e)).split("."))[0].length&&(o[0]=o[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),(o[1]||"").length<t&&(o[1]=o[1]||"",o[1]+=new Array(t-o[1].length+1).join("0")),o.join(a)}function rand(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function countdown(e,t,a){clearInterval(countdown_interval);var n=()=>{t&&t(e),e<=0&&(a&&a(e),clearInterval(countdown_interval)),e--};n(),countdown_interval=setInterval(n,1e3)}function getNumEnding(e,t){let a;return e%=100,a=11<=e&&e<=19?t[2]:1==(i=e%10)?t[0]:4==i?t[1]:t[2]}function remaining(e,t){let a="";var n,s,i,r,o,l,c;return e=Math.floor((new Date(e).getTime()-Date.now())/1e3),s=getNumEnding(n=Math.floor(e/86400),["–¥–µ–Ω—å","–¥–Ω—è","–¥–Ω–µ–π"]),r=getNumEnding(i=Math.floor(e%86400/3600),["—á–∞—Å","—á–∞—Å–∞","—á–∞—Å–æ–≤"]),l=getNumEnding(o=Math.floor(e%3600/60),["–º–∏–Ω—É—Ç–∞","–º–∏–Ω—É—Ç—ã","–º–∏–Ω—É—Ç"]),c=getNumEnding(e=e%60,["—Å–µ–∫—É–Ω–¥–∞","—Å–µ–∫—É–Ω–¥—ã","—Å–µ–∫—É–Ω–¥"]),n&&(a=n+" "+s),i&&(a+=` ${i} `+r),o&&(a+=` ${o} `+l),null==t&&e&&(a+=` ${e} `+c),a}function hScrollToEl(e,t){var a=$(e).width()/2+100;$(""+e).animate({scrollLeft:$(e+` div[data-item-name="${t}"]`).position().left-a},500)}function isEmoji(e){return!!e.match(["(?:[‚úÄ-‚ûø]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[#-9]Ô∏è?‚É£|„äô|„äó|„ÄΩ|„Ä∞|‚ìÇ|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|üÜé|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|üàö|üàØ|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|‚Äº|‚Åâ|[‚ñ™-‚ñ´]|‚ñ∂|‚óÄ|[‚óª-‚óæ]|¬©|¬Æ|‚Ñ¢|‚Ñπ|üÄÑ|[‚òÄ-‚õø]|‚¨Ö|‚¨Ü|‚¨á|‚¨õ|‚¨ú|‚≠ê|‚≠ï|‚åö|‚åõ|‚å®|‚èè|[‚è©-‚è≥]|[‚è∏-‚è∫]|üÉè|‚§¥|‚§µ|[‚Üê-‚áø])"].join("|"))}var back,back1,oneback=!(window.smoothScroll=function(e){var t=e;do{if(!(t=t.parentNode))return}while(t.scrollTop+=1,0==t.scrollTop);for(var a=0;e!=t&&(a+=e.offsetTop,e=e.offsetParent););(scroll=function(e,t,a,n){30<++n||(e.scrollTop=t+(a-t)/30*n,setTimeout(function(){scroll(e,t,a,n)},20))})(t,t.scrollTop,a,0)});function page(e,t){var a=e;return $('.navbar__btn[action="home"]').removeClass("hidden"),$('.navbar__btn[action="logout"]').addClass("hidden"),0==e||null==e?(page(back1,t),void(back1="main")):("main"==e?($(".garage-page, .garage-page__main-page").addClass("hidden"),$(".garage-main").hide(),$(".garage-intro").show(),$("#menu a").removeClass("active"),$("#mygarage").show(),$('.navbar__btn[action="logout"]').removeClass("hidden"),$('.navbar__btn[action="home"]').addClass("hidden"),back1=back="main"):("online"==e?$.get("/api/online",function(e){$("#online-table").empty();let t=0;for(const a of e)t++,$("#online-table").append(`
				<div class="table-view-item" onclick="profile('${a.login}', '${a.rank}')">
					<div class="user">
						<div class="rank rm${a.rank}"></div>
						<div class="name">${a.login} (${a.messages})</div>
					</div>
					<div class="user-kry">
						${number_format(a.kry)} <kry></kry>
					</div>
				</div>
				`);$("#online-title-count").text(`–û–Ω–ª–∞–π–Ω (${t})`)}):"ratings"==e?ratings_page():"shop"==e?$.get("/api/shop-paints",function(e){let t="";for(const n of e){var a=`paintShopBuy(${n.id}, '${n.name}')`;t+=`
                    <div class="card" onclick="${a}">
                        <div class="card__title" title="${n.name}">${n.name}</div>
                        <div class="img">
                            <img src="${n.image}" loading="lazy">
                        </div>
                        <div class="card__price">
                            ${n.price} <coin1></coin1>
                        </div>
                    </div>
                `}$("#shopping-paints").html(t)}):"clans"==e?clans_page():"clansOne"==e?($("#clans").addClass("hidden"),$("#oneclan").removeClass("hidden"),e="clans"):"quests"===e?ME.hasTasks&&Tasks.load():$("#mygarage").hide(),$(".garage-page__main-page").addClass("hidden"),$(".garage-page, .garage-page__main").removeClass("hidden"),$(".garage-intro, .garage-main").hide(),$("#page-"+e).removeClass("hidden"),back1=back||"main",back="clansOne"==a?"clansOne":e),pauseGarage(),void(t&&t()))}function openlink(e){window.open(e,"_blank")}function rules(){page("rules",function(){$("#menu a").removeClass("active"),$('#menu a[data-nav="rules"]').addClass("active")})}function alertify(e,t,a,n,s){null==t&&(t="–ò–ù–§–û–†–ú–ê–¶–ò–Ø"),$(".modal-overlay, .modal").show(),$(".modal .modal-title span").text(t),$(".modal .modal-text").html(e),$(".modal .modal-title").removeClass("success error"),a&&(1==a?a="success":2==a&&(a="error"),$(".modal .modal-title").addClass(a),0==a&&$(".modal .modal-title").removeClass("success error")),s?$(".modal").css("top","50%"):$(".modal").attr("style","display: block;"),n?$(".modal .modal-footer").html(n):$(".modal .modal-footer").empty()}function alertify_close(){$(".modal-overlay, .modal").hide()}function alertify_quest(e,t){"function"==typeof t?(alertify(e,"–ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï",!1,`
        <button class="btn" onclick="alertify_close()">–ù–µ—Ç</button>
        <button class="btn green">–î–∞</button>
        `),$(".modal .modal-footer .btn:contains('–î–∞')").click(t)):alertify(e,"–ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï",!1,`
        <button class="btn" onclick="alertify_close()">–ù–µ—Ç</button>
        <button class="btn green" onclick="${t}">–î–∞</button>
        `)}function alertify_prompt(e){let t={title:"",text:"",inputType:"text",inputPlaceholder:"",footerBtn1Text:"–û—Ç–º–µ–Ω–∏—Ç—å",footerBtn2Text:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å",footerBtn1Action:"alertify_close()",footerBtn2Action:""};"object"==typeof e&&(t.title=e.title||t.title,t.text=e.text||t.text,t.inputType=e.inputType||t.inputType,t.inputPlaceholder=e.inputPlaceholder||t.inputPlaceholder,t.footerBtn1Text=e.footerBtn1Text||t.footerBtn1Text,t.footerBtn2Text=e.footerBtn2Text||t.footerBtn2Text,t.footerBtn1Action=e.footerBtn1Action||t.footerBtn1Action,t.footerBtn2Action=e.footerBtn2Action||t.footerBtn2Action,alertify(`<div class="font-13 mtn-20 text-left">${t.text}</div> <input id="alertify_prompt-text" class="input" type="${t.inputType}" placeholder="${t.inputPlaceholder}">`,t.title,0,`<div class="flex between mtn-20 gap-10 w-full p-0-10"><button class="btn w-full" onclick="${t.footerBtn1Action}">${t.footerBtn1Text}</button><button class="btn green" onclick="${t.footerBtn2Action}">${t.footerBtn2Text}</button></div>`))}$(".garage-page__back").click(()=>page()),$(document).ready(function(){$(".progress").addClass("init")}),$(document).keydown(function(e){e.ctrlKey&&38==e.which&&MyLastMsg()}),$(".online-count").click(function(){page("online",function(){$("#menu a").removeClass("active"),$('#menu a[data-nav="online"]').addClass("active")})});var mylastnickname="",lastmsg="",writeTo="",usersCount=0;function ratingsNewAll(){$.get("/user-stats/new1",function(e){$("#ratings-page table tbody").empty();let t=0;for(const a of e)t++,$("#ratings-page #table-1 tbody").append(`
            <tr>
                <td>${t}</td>
                <td><div class="rank r${a.rank}"></div> <span onclick="profile('${a.login}', '${a.rank}')" class="user">${a.login} (${a.messages})</span></td>
                <td class="text-center">${number_format(a.score)}</td>
                <td class="text-center">${number_format(a.kry)} <kry></kry></td>
            </tr>
            `)})}function ratings_page(){$.get("/user-stats/all",function(e){$("#ratings-page table tbody").empty();let a=0;for(const t of e.score)a++,$("#ratings-page #table-1 tbody").append(`
            <tr>
                <td>${a}</td>
                <td><div class="rank r${t.rank}"></div> <span onclick="profile('${t.login}', '${t.rank}')" class="user">${t.login} (${t.messages})</span></td>
                <td class="text-center">${number_format(t.score)}</td>
                <td class="text-center">${number_format(t.kry)} <kry></kry></td>
            </tr>
            `);a=0;for(const i of e.kry)a++,$("#ratings-page #table-2 tbody").append(`
            <tr>
                <td>${a}</td>
                <td><div class="rank r${i.rank}"></div> <span onclick="profile('${i.login}', '${i.rank}')" class="user">${i.login} (${i.messages})</span></td>
                <td class="text-center">${number_format(i.score)}</td>
                <td class="text-center">${number_format(i.kry)} <kry></kry></td>
            </tr>
            `);a=0;for(const r of e.messages)a++,$("#ratings-page #table-3 tbody").append(`
            <tr>
                <td>${a}</td>
                <td><div class="rank r${r.rank}"></div> <span onclick="profile('${r.login}', '${r.rank}')" class="user">${r.login}</span></td>
                <td class="text-center">${number_format(r.messages)}</td>
                <td class="text-center">${number_format(r.score)}</td>
                <td class="text-center">${number_format(r.kry)} <kry></kry></td>
            </tr>
            `);a=0;for(const o of e.golds)a++,$("#ratings-page #table-4 tbody").append(`
            <tr>
                <td>${a}</td>
                <td><div class="rank r${o.rank}"></div> <span onclick="profile('${o.login}', '${o.rank}')" class="user">${o.login} (${o.messages})</span></td>
                <td class="text-center">${number_format(o.golds)}</td>
                <td class="text-center">${number_format(o.kry)} <kry></kry></td>
            </tr>
            `);a=0;for(const l of e.loto)a++,$("#ratings-page #table-5 tbody").append(`
            <tr>
                <td>${a}</td>
                <td><div class="rank r${l.rank}"></div> <span onclick="profile('${l.login}', '${l.rank}')" class="user">${l.login} (${l.messages})</span></td>
                <td class="text-center">${number_format(l.lotoWins)}</td>
                <td class="text-center">${number_format(l.kry)} <kry></kry></td>
            </tr>
            `);a=0;for(const c of e.new){a++;let e=new Date(c.reg_date),t=e.getMonth()+1;t<10&&(t="0"+t);var n=e.getFullYear().toString().substring(2),s=e.getDate()<10?"0"+e.getDate():e.getDate(),d=e.getHours()<10?"0"+e.getHours():e.getHours(),g=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes();$("#ratings-page #table-6 tbody").append(`
            <tr>
                <td>${a}</td>
                <td><div class="rank r${c.rank}"></div> <span onclick="profile('${c.login}', '${c.rank}')" class="user">${c.login} (${c.messages})</span></td>
                <td class="text-center">${number_format(c.score)}</td>
                <td class="text-center">${number_format(c.kry)} <kry></kry></td>
                <td class="text-center">${s}.${t}.${n} –≤ ${d}:${g}</td>
            </tr>
            `)}usersCount=e.count}),$("#ratings-nav a").click(function(){var e=$(this).attr("data-id");$("#ratings-nav a").removeClass("active"),$(this).addClass("active"),$("#ratings-page table").addClass("hidden"),$("#ratings-page #table-"+e).removeClass("hidden"),1==e?$("#ratings-info span").text("–¢–æ–ø 15 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ–ø—ã—Ç–∞"):2==e?$("#ratings-info span").text("–¢–æ–ø 15 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤"):3==e?$("#ratings-info span").text("–¢–æ–ø 15 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"):4==e?$("#ratings-info span").text("–¢–æ–ø 15 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–π–º–∞–Ω–Ω—ã—Ö –∑–æ–ª–æ—Ç—ã—Ö —è—â–∏–∫–æ–≤"):5==e?$("#ratings-info span").text("–¢–æ–ø 15 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–±–µ–¥ –≤ –ª–æ—Ç–µ—Ä–µ–∏"):6==e&&$("#ratings-info span").text("–ü–æ—Å–ª–µ–¥–Ω–∏–µ 15 –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –í—Å–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö: "+number_format(usersCount))})}function clans_page(){$("#oneclan").addClass("hidden"),$("#clans").removeClass("hidden"),$(".clans-top").kinetic({filterTarget:function(e,t){if(!/down|start/.test(t.type))return!/area|a|input/i.test(e.tagName)},cursor:"default",y:!1}),$.get("/api/clans/getclans",function(e){let t="",a="",n=0,s=0;myclan=e.myclan;for(const r of e.clans){n++;var i=r.by.split("|");t+=`
            <tr>
                <td>${n}</td>
                <td>${r.level}</td>
                <td>${r.teg}</td>
                <td><a class="clan" onclick="clan(${r.clanId})">${r.name}</a></td>
                <td style="text-align:left;">
                    <a class="user" onclick="profile('${i[1]}', '${i[0]}')">
                        <i class="rank r${i[0]}"></i>
                        ${i[1]}
                    </a>
                </td>
                <td>${r.users}/${r.maxUsers}</td>
                <td>${r.date}</td>
                <td>${number_format(r.kry)} <kry></kry>
                </td>
            </tr>
            `,a+=`
            <div class="clan" onclick="clan(${r.clanId})">
                <div>[${r.teg}] - ${number_format(r.kry)} <kry></kry></div>
                <img src="https://awpbajxiyo.cloudimg.io/height/200/n/${r.logo}">
            </div>
            `,s+=r.kry}$("#clans-page #table-1 tbody").html(t),$("#page-clans .clans-top").html(a),$(".clans-top-title div:first-child").text(`–°–ø–∏—Å–æ–∫ –∫–ª–∞–Ω–æ–≤ (${n})`),$(".clans-top-title div:last-child").html(`–û–±—â–∏–π –∫–∞–ø–∏—Ç–∞–ª: ${number_format(s)} <kry></kry>`),$("#page-clans img").on("error",function(){$(this).attr("src","../img/broken.svg")})})}function menuHide(){$(document).mouseup(function(e){let t=$("#usermenu");t.is(":visible")&&(t.is(e.target)||t.hide())})}function MenuTOP(){$("#usermenu").show();var e=document.getElementById("usermenu").clientHeight,t=event.clientY;document.documentElement.clientHeight<e+t?$("#usermenu").css("top","calc(100% - "+(e+8)+"px)"):$("#usermenu").css("top",event.clientY),$("#usermenu").css("left",event.clientX)}function copyText(e){navigator.clipboard.writeText(e)}function userProfile(e){$.get("/api/profile/"+e,e=>{page("profile",function(){console.log(e)})}),console.log(e)}function profile(e,t){$("#usermenu .header div").text(e),t?$("#usermenu .header i").attr("class","rank r"+t):$("#usermenu .header i").attr("class","rank r1"),$("#usermenu .items-list div:first-child").attr("onclick",`tologin('${e}')`),$("#usermenu .items-list div:last-child").attr("onclick",`pm('${e}')`),$('#usermenu .menu div[tooltip="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∏–∫"]').attr("onclick",`copyText('${e}')`),$('#usermenu .menu div[tooltip="–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"]').attr("onclick",`userProfile('${e}')`),MenuTOP(),menuHide()}var pressTimer,pressTimer1,ignore_users=[];function ignore(e){if(0<ignore_users.indexOf(e))return alert("–î–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–≥–Ω–æ—Ä!"),!1;-1===ignore_users.indexOf(e)&&ignore_users.push(e),autoIgnore()}function removeIgnore(e,t){var a=ignore_users.indexOf(e);ignore_users.splice(a,1),1==t&&(alert("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "+e+" –±—ã–ª —É—Å–ø–µ—à–Ω–æ —Å–Ω—è—Ç —Å –∏–≥–Ω–æ—Ä–∞!"),$("#ignore-"+e).remove())}function autoIgnore(){for(var e in ignore_users)$("msg[by='"+ignore_users[e]+"']").html("–°–∫—Ä—ã—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "+ignore_users[e]),$("msg[by='"+ignore_users[e]+"']").addClass("isHidden")}const vAudio=(e,t)=>{let a=new Audio;return a.volume=e||.2,t&&(a.loop=!0),a},sounds={caseSound:vAudio(),caseItemSound:vAudio(),ambientSound:vAudio(.15,1),goldSound:vAudio()};function ambientSoundP(){const e=sounds.ambientSound.play();void 0!==e&&e.then(()=>{}).catch(e=>{setTimeout(()=>{ambientSoundP()},1e3)})}function playSound(e,t,a){sounds[e].src=t,sounds[e].volume=a||.4,sounds.play()}function menu(){$("#menu").is(":visible")?($("#menu").slideUp(100),$(".garage .garage__nav").removeClass("not"),$(".garage-page__main-page").removeClass("top")):($(".garage .garage__nav").addClass("not"),$("#menu").slideDown({duration:50,start:function(){$(this).css({display:"flex"})}}),$(".garage-page__main-page").addClass("top"))}ME.settings.caseSound&&(sounds.caseSound.src="../assets/container.mp3",sounds.caseItemSound.src="../assets/container_item.mp3"),ME.settings.ambientSound&&(sounds.ambientSound.src="../assets/ambient_garage.mp3",ambientSoundP()),ME.settings.goldSound&&(sounds.goldSound.src="../assets/container.mp3"),$("header .navbar .navbar__btn[action]").click(function(){var e=$(this).attr("action");"fullscreen"==e?toggleFullScreen():"logout"==e?document.location.href="/logout":"quests"==e?page("quests"):"shop"==e?page("shop"):"lottery"==e?page("lottery",function(){socket.emit("getLottery",1)}):"settings"==e?page("settings",function(){console.log("settings")}):"home"==e&&page("main")}),$("header .navbar .navbar__item .item-number").click(function(){page("shop")}),$("#menu a").click(function(){menu(),page($(this).attr("data-nav")),setTimeout(()=>{$("#menu .nav__item").removeClass("active"),$(this).addClass("active")},500)}),socket.on("account",function(e){$("#my-coin").text(number_format(e.coin)),$("#my-kry").text(number_format(e.kry)),$("#rank_name").text(e.rank_name),$("#rank_text").text(e.rank_text),$("header .navbar .user-details .progress div").width(parseInt(e.rank_progress)+"%");var t="rm"+e.rank,a=(-1==$(".user-details .rank").attr("class").indexOf(t)&&(a=$(".user-details .rank").attr("class").match(/(rm|rmv)\d+/),console.log(a),a&&($(".user-details .rank").removeClass(a[0]),$(".user-details .rank").addClass(t),$(".cong-rank").length?($(".cong-rank").show(),$(".cong-rank .rank").removeClass(a[0]),$(".cong-rank .rank").addClass(t)):($(".garage").append(`
                <div class="cong-rank">
                    <div class="rank ${t}"></div>
                    <div>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–ª—É—á–∏–ª–∏ –Ω–æ–≤–æ–µ –∑–≤–∞–Ω–∏–µ!</div>
                    <button class="btn" onclick="alertify_close();$('.cong-rank').hide()">–°–ø–∞—Å–∏–±–æ!</button>
                </div>
                `),$(".modal-overlay").fadeIn(200)))),$(".user-details .rank").on("classChanged",function(){console.log("–ü–æ–∑–¥–∞–≤–ª—è–µ–º —Å –Ω–æ–≤—ã–º –∑–≤–∞–Ω–∏–µ–º!")}),e.howmuch.split("|").map(Number)),t=5+a[2],e=100+a[0]+a[1];$(".gear-score .score div:first-child").text(t+"/"+e),$(".gear-score .item-name:eq(0) div:last-child").html(`+ ${a[0]} <kry></kry>`),$(".gear-score .item-name:eq(1) div:last-child").html(`+ ${a[1]} <kry></kry>`),$(".gear-score .item-name:eq(2) div:last-child").html(`+ ${a[2]} –æ–ø—ã—Ç–∞`),$(".gear-score .item-name:eq(3) div:last-child").html(`+ ${a[3]} –∫–∫–æ–π–Ω–∞`)}),socket.on("checkUser",function(e){e==ME.login&&(document.location.href="/logout")}),socket.on("onlineUsers",function(e){$("#onlineNum").text(e)});const garage={initgarage2:!1,loaded:!1,garage:!1,premiumTimer:!1,installed:{Turret:"",Hull:"",Paint:""},selected:"",main:function(){$(".garage-intro").hide(),$(".garage-main").show(),$("#mygarage").hide(),$("#mygarage1").show()},getRes:function(e,t,d){let s="";if("turrets"==e){for(var a of t){var g=a.have?"":" not";let e=a.type;e=4==e?"XT":5==e?"LC":6==e?"PR":7==e?"DC":8==e?"TC":9==e||11==e?"":10==e?"UT":"M"+e;g=`
                <div class="garage__items-item${g}" onclick="garage.info('${a.name1}', 1)" ondblclick="garage.install('${a.name1}', 'turret')" data-item-name="${a.name1}" data-type="turret">
                    <div class="top">
                        <div class="name">${a.name}</div>
                        <div class="modification">${e}</div>
                    </div>
                    <img src="${a.image}" alt="img" oncontextmenu="return false" ondragstart="return false">
                </div>
                `;s+=g}return s}if("hulls"==e){for(var n of t){var u=n.have?"":" not";let e=n.type;e=4==e?"XT":5==e?"LC":6==e?"PR":7==e?"DC":8==e?"TC":9==e||11==e?"":10==e?"UT":"M"+e;u=`
                <div class="garage__items-item${u}" onclick="garage.info('${n.name1}', 2)" ondblclick="garage.install('${n.name1}', 'hull')" data-item-name="${n.name1}" data-type="hull">
                    <div class="top">
                        <div class="name">${n.name}</div>
                        <div class="modification">${e}</div>
                    </div>
                    <img src="${n.image}" alt="img" oncontextmenu="return false" ondragstart="return false">
                </div>
                `;s+=u}return s}if("paints"==e){for(var i of t){var r=i.have?"":" not";let e="",t="<kry></kry>";2==i.unic&&(t="<coin></coin>")," not"==r&&(e=number_format(i.price)+" "+t),1==i.unic&&(e="");r=`
                <div class="garage__items-item${r}" onclick="garage.info('p${i.id}', 3)" ondblclick="garage.install('${i.id}', 'paint')" data-item-name="p${i.id}" data-type="paint">
                    <div class="top">
                        <div class="name">${i.name}</div>
                    </div>
                    <div class="price">${e}</div>
                    <img src="${i.image}" loading="lazy" alt="img" oncontextmenu="return false" ondragstart="return false">
                </div>
                `;s+=r}return s}if("cases"==e){for(var o of t){let e=number_format(o.price)+" <kry></kry>",t=(1!=o.unic&&2!=o.unic||(e=""),"");4==o.id?t='style="filter: hue-rotate(155deg)"':5==o.id?t='style="filter: hue-rotate(245deg)"':7==o.id&&(t='style="filter: hue-rotate(270deg)"'),s+=`
                <div class="garage__items-item" onclick="garage.info('${o.id}', 5)" data-item-name="${o.id}" data-type="case">
                    <div class="top">
                        <div class="name">${o.name}</div>
                    </div>
                    <div class="count">${o.have}</div>
                    <div class="price">${e}</div>
                    <img src="${o.image}" ${t}alt="img" oncontextmenu="return false" ondragstart="return false">
                </div>
                `}return s}if("supply"==e){for(var l of t){let e=number_format(l.price)+" <kry></kry>",t=(0<l.have&&1<l.id&&(e=""),2==l.id&&(e=""),""),a="",n="";l.id<=2&&(t=`<div class="count">${l.have}</div>`),2<l.id&&(a=' class="drone"',0<l.have&&(n=" installed")),s+=`
                <div class="garage__items-item${n}" onclick="garage.info('${l.id}', 6)" data-item-name="${l.id}" data-type="supply">
                    <div class="top">
                        <div class="name">${l.name}</div>
                    </div>
                    ${t}
                    <div class="price">${e}</div>
                    <img src="${l.image}"${a} alt="img" oncontextmenu="return false" ondragstart="return false">
                </div>
                `}return s}if("special"==e){for(var c of t){let e="",t="";0<c.price&&(t=`<div class="price">${number_format(c.price)} <kry></kry></div>`),"special_premium_promocard"==c.id?e=' style="filter: hue-rotate(255deg)"':"special_premium"==c.id&&(e=' style="margin-top: 12px"'),s+=`
                <div class="garage__items-item" onclick="garage.info('${c.id}', 7)" data-item-name="${c.id}" data-type="gifts">
                    <div class="top">
                        <div class="name">${c.name}</div>
                    </div>
                    ${t}
                    <img src="${c.image}"${e} alt="img" oncontextmenu="return false" ondragstart="return false">
                </div>
                `}return s}if("gifts"==e){for(var m of t)s+=`
                <div class="garage__items-item" onclick="garage.info('${m.id}', 8)" data-item-name="${m.id}" data-type="gifts">
                    <div class="top">
                        <div class="name">${m.name}</div>
                    </div>
                    <img src="${m.image}" alt="img" oncontextmenu="return false" ondragstart="return false">
                </div>
                `;return s}d&&d()},get:{turrets:t=>{$.get("/api/garage/turrets",function(e){e=garage.getRes("turrets",e);$("#garage_turrets").html(e),$(`.garage__items-item[data-item-name="${garage.installed.Turret}"]`).addClass("installed active"),$(".btn-upgrade #upgrade-text").html(number_format(garage.installed.details.nextPrice)+" <kry></kry>"),t&&t(e)})},hulls:t=>{$.get("/api/garage/hulls",function(e){e=garage.getRes("hulls",e);$("#garage_hulls").html(e),$(`.garage__items-item[data-item-name="${garage.installed.Hull}"]`).addClass("installed active"),t&&t(e)})},paints:t=>{$.get("/api/garage/paints",function(e){e=garage.getRes("paints",e);$("#garage_paints").html(e),$(`.garage__items-item[data-item-name="${garage.installed.Paint}"]`).addClass("installed active"),t&&t(e)})},cases:t=>{$.get("/api/garage/cases",function(e){e=garage.getRes("cases",e);$("#garage_containers").html(e),t&&t(e)})},supply:t=>{$.get("/api/garage/supply",function(e){e=garage.getRes("supply",e);$("#garage_supply").html(e),t&&t(e)})},special:t=>{$.get("/api/garage/special",function(e){e=garage.getRes("special",e);$("#garage_special").html(e),t&&t(e)})},gifts:t=>{$.get("/api/garage/gifts",function(e){e=garage.getRes("gifts",e);$("#garage_gifts").html(e),t&&t(e)})},all:t=>{garage.loaded=!0,$.get("/api/garage/all",function(e){if(!e||!e.Installed)return!1;garage.installed={Turret:e.Installed.Turret,Hull:e.Installed.Hull,Paint:e.Installed.Paint,details:e.Installed.installedDetails},$(".garage__information .info__description").html(garage.installed.details.description),$(".garage__information .info__title-title").html(garage.installed.details.name),$(".garage__information #gs-plus").text(garage.installed.details.plus),$("#garage_turrets").html(garage.getRes("turrets",e.Turrets)),$("#garage_hulls").html(garage.getRes("hulls",e.Hulls)),$("#garage_paints").html(garage.getRes("paints",e.Paints)),$("#garage_containers").html(garage.getRes("cases",e.Cases)),$("#garage_supply").html(garage.getRes("supply",e.Supplies)),$("#garage_special").html(garage.getRes("special",e.Special)),$("#garage_gifts").html(garage.getRes("gifts",e.Gifts)),garage.garage=e,$(`.garage__items .garage__items-item[data-item-name="${garage.installed.Turret}"]`).addClass("installed active"),$(`.garage__items-item[data-item-name="${garage.installed.Hull}"]`).addClass("installed active"),$(`.garage__items-item[data-item-name="p${garage.installed.Paint}"]`).addClass("installed active"),-1==garage.installed.details.nextPrice?($(".btn-upgrade").attr("onclick",""),$(".btn-upgrade").attr("disabled","true"),$(".btn-upgrade span").text("")):$(".btn-upgrade #upgrade-text").html(number_format(garage.installed.details.nextPrice)+" <kry></kry>"),1==garage.installed.details.installed&&$(".btn-install").text("–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ").attr("disabled","true"),$("#skins-btn .skin-btn.bts[data-skin]").click(function(){let e=$(this).attr("data-skin");var t,a=["_xt","_lc","_p","_dc","_tc","_ut"];4==e?e=a[0]:5==e?e=a[1]:6==e?e=a[2]:7==e?e=a[3]:8==e?e=a[4]:10==e&&(e=a[5]);for(t of a)garage.selected=garage.selected.replace(t,"");e=garage.selected+e;let n=$(".garage__nav a.active").attr("data-id");"turrets"==n?n="turret":"hulls"==n&&(n="hull"),"turret"!=n&&"hull"!=n||(garage.info(e,n),garage.skinBtn1(),setTimeout(()=>{$("#skins-btn .skin-btn:not(.bts)").attr("onclick","garage.skinBtn1()")},100))}),t&&t(e)})}},getItems:function(e,t){null==e&&(e="turrets"),t&&garage.get[e](),garage_tab(e),garage.main()},buy:function(t,a,n){$.post(`/api/garage/${t}/${a}/buy`,function(e){if(e.success)return alertify("–í—ã —É—Å–ø–µ—à–Ω–æ –∫—É–ø–∏–ª–∏ –¥–∞–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç!","–£–°–ü–ï–®–ù–û",1),socket.emit("getAccount"),"turret"==a?garage.get.turrets(function(){garage.info(t,a),garage.install(t,a)}):"hull"==a?garage.get.hulls(function(){garage.info(t,a),garage.install(t,a)}):"paint"==a?garage.get.paints(function(){garage.info(t,a),garage.install(t,a),$("#garage_paints").scrollLeft(0),setTimeout(()=>hScrollToEl("#garage_paints","p"+t),100)}):"supply"==a&&garage.get.supply(function(){garage.info(t,a)}),n&&n(),!1;alertify(e.error,"–û—à–∏–±–∫–∞",2)})},info:function(l,c){clearInterval(garage.premiumTimer),$(".garage__items-item").removeClass("active"),$(`.garage__items-item[data-item-name="${l}"]`).addClass("active"),this.selected=l,1==c?c="turret":2==c?c="hull":3==c?(c="paint",l=l.replace("p","")):5==c?c="case":6==c?c="supply":7==c?c="special":8==c&&(c="gifts"),"hull"!=c&&"turret"!=c&&"gifts"!=c||$(".btn-install").removeClass("hidden"),"hull"==c||"turret"==c?$("#skins-btn").removeClass("hidden"):$("#skins-btn").addClass("hidden"),$.get(`/api/garage/${l}/`+c,function(i){let a=i.nextPrice||i.price;var n;if("paint"!=c&&"turret"!=c&&"hull"!=c||(i.installed?$(".garage-button.btn-install").text("–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ").attr("disabled","true").attr("onclick","").removeClass("warning"):(i.name1=i.name1||i.id,i.have?$(".garage-button.btn-install").text("–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å").removeAttr("disabled").removeClass("warning").attr("onclick",`garage.install('${i.name1}', '${c}')`):$(".garage-button.btn-install").text("–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å").attr("disabled","true").removeClass("warning").attr("onclick","")),i.plus=i.plus||0,$(".garage__information .info .info__title .info__title-title").text(i.name)),"paint"==c)i.have?$(".garage-button.btn-upgrade").addClass("hidden"):($(".garage-button.btn-upgrade").removeAttr("disabled"),$(".garage-button.btn-upgrade").removeClass("hidden"),$(".garage-button.btn-upgrade span:first-child").text("–ö—É–ø–∏—Ç—å"),0<i.unic?$(".garage-button.btn-upgrade #upgrade-text").html(number_format(a)+" <coin></coin>"):$(".garage-button.btn-upgrade #upgrade-text").html(number_format(a)+" <kry></kry>"),r=$(".info .info__title .info__title-title").text(),$(".garage-button.btn-upgrade").attr("onclick",`alertify_quest('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å –∫—Ä–∞—Å–∫—É ${r}?', "garage.buy('${i.id}', 'paint')")`),$(".garage-button.btn-install").text("–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å").attr("disabled","true").attr("onclick","").removeClass("warning")),1==i.unic&&$(".garage-button.btn-upgrade").addClass("hidden"),$(".garage__information .info__title .gs").addClass("hidden"),$(".garage__information .info .info__description").text(i.description+` –î–∞–Ω–Ω–∞—è –∫—Ä–∞—Å–∫–∞ –¥–∞—ë—Ç ${i.plus} –∫–∫–æ–∏–Ω–æ–≤ –∑–∞ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.`);else if("turret"==c||"hull"==c){let t="";if(t=3<i.type?i.type:i.type+1,$(".garage__information .info__title .gs").removeClass("hidden"),$(".garage__information .info__title .gs div").html(`+<span id="gs-plus">${i.plus}</span> <kry></kry>`),i.skins){$(".skins-wrapper .skin-btn[data-skin]:not([disabled])").addClass("hidden");let e=0,t;for(var s of i.skins)e++,$(`.skins-wrapper .skin-btn[data-skin="${s}"]`).removeClass("hidden");t=11-e,$(".skins-wrapper .skin-btn.bts[disabled][data-skin-h]").addClass("hidden");for(let e=0;e<t;e++)$(`.skins-wrapper .skin-btn.bts[disabled][data-skin-h="${e}"]`).removeClass("hidden")}let e=!1;for(n of["_xt","_lc","_p","_dc","_tc","_ut"])if(-1<l.indexOf(n)){e=!0;break}if(t<4){t=` (–ú${t}) `,$(".garage-button.btn-upgrade").removeAttr("disabled"),$(".garage-button.btn-upgrade span:first-child").text("–£–ª—É—á—à–∏—Ç—å"+t),$(".garage-button.btn-upgrade #upgrade-text").html(number_format(a)+" <kry></kry>");var r=$(".info .info__title .info__title-title").text().split(" ")[0]+t.replace(/\(/,"").replace(/\)/,"");$(".garage-button.btn-upgrade").attr("onclick",`alertify_quest('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å ${r}?', "garage.buy('${i.name1}', '${c}')")`),$(".garage-button.btn-upgrade").removeClass("hidden")}else if(!e||i.have)$(".garage-button.btn-upgrade").attr("disabled","true"),$(".garage-button.btn-upgrade span").text("");else{let e="";4==t?e="XT":5==t?e="LC":6==t?e="PR":7==t?e="DC":8==t?e="TC":10==t&&(e="UT"),t=` (${e}) `,a=i.price,$(".garage-button.btn-upgrade").removeAttr("disabled"),$(".garage-button.btn-upgrade span:first-child").text("–ö—É–ø–∏—Ç—å"+t),$(".garage-button.btn-upgrade #upgrade-text").html(number_format(a)+" <kry></kry>");r=$(".info .info__title .info__title-title").text();$(".garage-button.btn-upgrade").attr("onclick",`alertify_quest('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å ${r}?', "garage.buy('${l}', '${c}')")`),$(".garage-button.btn-upgrade").removeClass("hidden")}$(".garage__information .info .info__description").text(i.description)}else if("supply"==c)2==i.unic?1==i.have?($(".garage-button.btn-upgrade").addClass("hidden"),$(".garage-button.btn-install").text("–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è").attr("disabled","true").removeClass("hidden warning").attr("onclick","")):($(".garage-button.btn-install").addClass("hidden"),$(".garage-button.btn-upgrade").attr("onclick",`alertify_quest('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å –¥—Ä–æ–Ω ${i.name}?', "garage.buy('${i.id}', 'supply')")`).removeClass("hidden warning").removeClass("hidden").removeAttr("disabled"),$(".garage-button.btn-upgrade span:first-child").text("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å"),$(".garage-button.btn-upgrade #upgrade-text").html(number_format(i.price)+" <kry></kry>")):0==i.unic?($(".garage-button.btn-install").removeClass("hidden"),0<i.have?$(".garage-button.btn-install").text("–°–±—Ä–æ—Å–∏—Ç—å").removeClass("hidden warning").removeAttr("disabled").attr("onclick",`alertify_quest('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å ${i.name}?', "garage.install('${i.id}', 'supply')")`):$(".garage-button.btn-install").text("–°–±—Ä–æ—Å–∏—Ç—å").removeClass("hidden warning").attr("disabled","true"),$(".garage-button.btn-upgrade").attr("onclick",`alertify_quest('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å ${i.name}?', "garage.buy('${i.id}', 'supply')")`).removeClass("hidden").removeAttr("disabled"),$(".garage-button.btn-upgrade span:first-child").text("–ö—É–ø–∏—Ç—å"),$(".garage-button.btn-upgrade #upgrade-text").html(number_format(i.price)+" <kry></kry>")):1==i.unic&&($(".garage-button.btn-upgrade").addClass("hidden"),0<i.have?$(".garage-button.btn-install").text("–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è").removeClass("hidden warning").attr("disabled","true"):$(".garage-button.btn-install").html("–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–∞–≥–∞–∑–∏–Ω").removeClass("hidden").addClass("warning").removeAttr("disabled").attr("onclick","pShop('batteries')")),2<=i.unic?(0<i.have&&$(".garage-button.btn-install").text("–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è").removeClass("hidden warning").attr("disabled","true"),$(".garage__information .info .info__title .info__title-title").text(i.name),$(".garage__information .info .info__description").text(`–î—Ä–æ–Ω ${i.name} –¥–∞—ë—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—á–∫–∏ –æ–ø—ã—Ç–∞ –∑–∞ –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∞ –∏–º–µ–Ω–Ω–æ ${i.description}.`)):($(".garage__information .info .info__title .info__title-title").text(i.name),$(".garage__information .info .info__description").text(i.description)),$(".garage__information .info__title .gs").addClass("hidden");else if("special"==c)$(".garage__information .info .info__title .info__title-title").text(i.name),$(".garage__information .info__title .gs").addClass("hidden"),0<i.price?($(".garage-button.btn-upgrade").attr("onclick",`garage.giftSend(${i.id})`).removeClass("hidden").removeAttr("disabled"),$(".garage-button.btn-upgrade span:first-child").text("–ü–æ–¥–∞—Ä–∏—Ç—å"),$(".garage-button.btn-upgrade #upgrade-text").html(number_format(i.price)+" <kry></kry>"),$(".garage-button.btn-install").addClass("hidden")):($(".garage-button.btn-upgrade").addClass("hidden"),0<i.have?$(".garage-button.btn-install").text("–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è").removeClass("hidden warning").attr("disabled","true"):$(".garage-button.btn-install").html("–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–∞–≥–∞–∑–∏–Ω").removeClass("hidden").addClass("warning").removeAttr("disabled").attr("onclick","pShop('others')"),"special_premium"==i.id&&0!==i.have&&(garage.premiumTimer=setInterval(()=>{$("#premium-timer").text("–ó–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ "+remaining(i.have))},1e3),i.description=i.description+`<div id="premium-timer">–ó–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ ${remaining(i.have)}</div>`,$(".garage-button.btn-install").text("–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è").removeClass("hidden warning").attr("disabled","true"))),$(".garage__information .info .info__description").html(i.description);else if("gifts"==c){$(".garage__information .info .info__title .info__title-title").html(`${i.name} <div class="mt-10"><img src="${i.image}"/></div>`),$(".garage__information .info__title .gs").addClass("hidden"),$(".garage-button").addClass("hidden"),i.description=chat.emojitext(i.description);r=`<a onclick="profile('${(r=i.login.split("|"))[1]}')"><i class="rank r${r[0]}"></i> ${r[1]}</a>`;$(".garage__information .info .info__description").html(`<div class="flex between center"><div>–ü—Ä–∏—Å–ª–∞–ª: ${r}</div><div>–î–∞—Ç–∞: ${i.date}</div></div><div class="mt-5">–¢–µ–∫—Å—Ç:</div><div class="gift-text">${i.description}</div>`)}else if("case"==c){$('.garage__information[data-garage="information1"] .info1 .info__title').text(i.name),$('.garage__information[data-garage="information1"] .info1 .info__description').text(i.text),$(".garage__information .case-container .caseImg").attr("src",i.image.replace(".webp","_x2.webp")),4==l?$(".garage__information .case-container .caseImg").attr("style","filter: hue-rotate(155deg);"):5==l?$(".garage__information .case-container .caseImg").attr("style","filter: hue-rotate(245deg);"):7==l?$(".garage__information .case-container .caseImg").attr("style","filter: hue-rotate(270deg);"):$(".garage__information .case-container .caseImg").removeAttr("style"),$(".opencase").removeClass("loading opening opened"),$(".case-buy").show(),$("#case-buy-num").val(1),$(".case-buy .btn[data-c-btn]").html(`–ö—É–ø–∏—Ç—å 1 <span>${number_format(i.price)} <kry></kry>`);r=(e,t,a,n)=>{0==t?$(e).removeClass("warning green").attr("disabled","true"):$(e).addClass("warning").removeAttr("disabled").attr("onclick","pShop('case')");let s="";"openx5"==$(e).attr("data-c-btn")?s=", 5":"openx15"==$(e).attr("data-c-btn")&&(s=", 15"),a&&$(e).addClass("green").removeClass("warning").removeAttr("disabled").attr("onclick",`garage.openCase(${i.id}${s})`)};if(0==i.have?($('.garage__information .case-container .btn[data-c-btn="open"]').attr("disabled","true"),r('.garage__information .case-container .btn[data-c-btn*="openx"]',i.unic)):($('.garage__information .case-container .btn[data-c-btn="open"]').removeAttr("disabled").addClass("green").attr("onclick",`garage.openCase(${i.id})`),i.have<5?r('.garage__information .case-container .btn[data-c-btn*="openx"]',i.unic):5<=i.have&&i.have<15?(r('.garage__information .case-container .btn[data-c-btn="openx5"]',i.unic,1),r('.garage__information .case-container .btn[data-c-btn="openx15"]',i.unic)):15<=i.have&&(r('.garage__information .case-container .btn[data-c-btn="openx5"]',i.unic,1),r('.garage__information .case-container .btn[data-c-btn="openx15"]',i.unic,1))),1==i.unic?$(".case-buy").removeClass("hidden").addClass("shop"):2==i.unic?($(".case-buy").addClass("hidden"),$('.garage__information .case-container .btn[data-c-btn*="openx"]').attr("disabled","true")):$(".case-buy").removeClass("hidden shop"),6==l?$(".case-buy .warning").attr("onclick","pShop('case')"):8==l&&$(".case-buy .warning").attr("onclick","pShop('ultracase')"),$(".garage__information .possible-items").empty(),l<6){let e="crys2";2==l?e="crys3":3==l?e="crys4":4==l&&(e="crys6");for(var t of i.prize)-1<t.search("–∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤")?$(".garage__information .possible-items").append(`
                                <div class="item">
                                    <div class="item__count">${t}</div>
                                    <img src="../img/shop/${e}.webp">
                                </div>
                            `):-1<t.search("–æ–ø—ã—Ç–∞")&&$(".garage__information .possible-items").append(`
                            <div class="item">
                                <div class="item__count">${t}</div>
                                <img src="../assets/img/score_big.webp">
                            </div>
                        `)}else if(6<=l)for(var o of i.prize){let e="";"img/svg/coinMedium.svg"!=o.img&&"img/paints.svg"!=o.img||(e=' style="height:90px;max-height: 90px;"'),$(".garage__information .possible-items").append(`
                        <div class="item">
                            <div class="item__count">${o.name}</div>
                            <img src="${o.img}"${e}>
                        </div>
                    `)}1==i.prize.length?$(".garage__information .possible-items").addClass("two").addClass("two-sm"):(2==i.prize.length?$(".garage__information .possible-items").addClass("two"):$(".garage__information .possible-items").removeClass("two")).removeClass("two-sm")}})},install:function(t,a,e){$.post(`/api/garage/${a}/${t}/install`,function(e){if(e.error)return"–í–∞–º —ç—Ç–æ –Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç!"==e.error||alertify(e.error,"–û—à–∏–±–∫–∞",2),!1;garage.info(t,a),"paint"==a&&(t="p"+t),"turret"==a||"hull"==a||"paint"==a?($(`.garage__items-item[data-item-name][data-type="${a}"]`).removeClass("active installed"),$(`.garage__items-item[data-item-name="${t}"]`).addClass("active installed"),$('.garage-intro .bigitem[data-item="turrets"] img').attr("src",e.info.turret),$('.garage-intro .bigitem[data-item="hulls"] img').attr("src",e.info.hull),$('.garage-intro .garage-intro__items-item[data-item="paints"] img').attr("src",e.info.color[2]),e.info.turret=e.info.turret.replace("preview.webp",""),e.info.hull=e.info.hull.replace("preview.webp",""),garageObj=e.info,viewer2.install(garageObj),viewer1.continueAnimation=!0,setTimeout(()=>{viewer1.install(garageObj),setTimeout(()=>viewer1.continueAnimation=!1,100)},500),garage.updateGarage()):"supply"==a&&("1"==t&&(e=parseInt($('.garage__items-item[data-item-name="1"][data-type="supply"] .count').text()),$('.garage__items-item[data-item-name="1"][data-type="supply"] .count').text(e-1)),alertify_close())})},updateGarage:()=>{$("#mygarage, #mygarage1").attr("src","/garage-viewer")},openCase:(r,t)=>{let e=$(".opencase .caseImg").attr("src").replace("open","x2"),o=e.replace("x2","open");$(".opencase").removeClass("loading opening opened"),$(".modal-overlay").fadeIn(200),$(".case-container .opencase").css("z-index","101"),$(".opencase .caseImg").attr("src",e);var a=0<t?t+"/":"";$(".case-buy").hide(),$.post(`/api/garage/${r}/${a}open-case`,function(i){i.error?alertify(i.error,"–û—à–∏–±–∫–∞",2):(ME.settings.caseSound&&new Audio("../assets/container.mp3").play(),$(".opencase").addClass("loading caseanim"),setTimeout(()=>{$(".opencase").removeClass("caseanim"),$(".opencase").addClass("opening");let a="",n;if(0<t){setTimeout(()=>{$(".opencase").addClass("opened"),$(".caseImg").attr("src",o)},200);let e=1,t=1800*i.info.length;setTimeout(()=>{$(".modal-overlay").fadeOut(200),$(".opencase .prize, .case-container .opencase").removeAttr("style")},t);for(let t of i.info){var s=1==e?1:1800*e-1800;setTimeout(()=>{$(".opencase .prize").hide(),setTimeout(()=>{0==t.type?(a=1==r?"img/shop/crys2.webp":2==r?"img/shop/crys3.webp":3==r?"img/shop/crys4.webp":4==r?"img/shop/crys6.webp":"img/shop/crys3.webp",n=t.amount+" "+getNumEnding(t.amount,["–∫—Ä–∏—Å—Ç–∞–ª–ª","–∫—Ä–∏—Å—Ç–∞–ª–ª–∞","–∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤"])):1==t.type&&(a="assets/img/score_big.webp",n=t.amount+" –æ—á–∫–æ–≤ –æ–ø—ã—Ç–∞"),setTimeout(()=>{ME.settings.caseSound&&new Audio("../assets/container_item.mp3").play()},200),$(".opencase .prize").show(),$(".opencase .prize img").attr("src",a),$(".opencase .prize div").text(n);var e=parseInt($(`.garage__items-item[data-item-name="${r}"][data-type="case"] .count`).text());$(`.garage__items-item[data-item-name="${r}"][data-type="case"] .count`).text(e-1),e-1<=0?($('.garage__information .case-container .btn[data-c-btn*="open"]').attr("disabled","true"),$('.garage__information .case-container .btn[data-c-btn*="openx"]').removeClass("green")):5<=e-1&&e-1<15?($('.garage__information .case-container .btn[data-c-btn="openx15"]').attr("disabled","true").removeClass("green"),$('.garage__information .case-container .btn[data-c-btn="openx5"]').addClass("green")):0<e-1&&e-1<5&&$('.garage__information .case-container .btn[data-c-btn*="openx"]').attr("disabled","true").removeClass("green"),socket.emit("getAccount")},100)},s),e++}}else{0==i.info.type?(a=1==r?"img/shop/crys2.webp":2==r?"img/shop/crys3.webp":3==r?"img/shop/crys4.webp":4==r?"img/shop/crys6.webp":"img/shop/crys3.webp",n=i.info.amount+" "+getNumEnding(i.info.amount,["–∫—Ä–∏—Å—Ç–∞–ª–ª","–∫—Ä–∏—Å—Ç–∞–ª–ª–∞","–∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤"])):1==i.info.type&&(a="assets/img/score_big.webp",n=i.info.amount+" –æ—á–∫–æ–≤ –æ–ø—ã—Ç–∞"),$(".opencase .prize img").attr("src",a),$(".opencase .prize div").text(n);var e=parseInt($(`.garage__items-item[data-item-name="${r}"][data-type="case"] .count`).text());$(`.garage__items-item[data-item-name="${r}"][data-type="case"] .count`).text(e-1),e-1<=0?($('.garage__information .case-container .btn[data-c-btn*="open"]').attr("disabled","true"),$('.garage__information .case-container .btn[data-c-btn*="openx"]').removeClass("green")):5<=e-1&&e-1<15?($('.garage__information .case-container .btn[data-c-btn="openx15"]').attr("disabled","true").removeClass("green"),$('.garage__information .case-container .btn[data-c-btn="openx5"]').addClass("green")):0<e-1&&e-1<5&&$('.garage__information .case-container .btn[data-c-btn*="openx"]').attr("disabled","true").removeClass("green"),setTimeout(()=>{setTimeout(()=>{ME.settings.caseSound&&new Audio("../assets/container_item.mp3").play()},200),$(".opencase").addClass("opened"),$(".caseImg").attr("src",o),setTimeout(()=>{$(".modal-overlay").fadeOut(200),$(".case-container .opencase").removeAttr("style")},1500)},200),socket.emit("getAccount")}},1e3))})},caseBuy:()=>{let t=parseInt($("#case-buy-num").val()),a=$("#garage_containers .garage__items-item.active").attr("data-item-name"),n=$("#garage_containers .garage__items-item.active .name").text().replace("¬´","").replace("¬ª","");alertify_quest(`–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å ${n} ?`,function(){$.get(`/api/garage/${a}/${t}/buy-case`,function(e){e.error?alertify(e.error,"–û—à–∏–±–∫–∞",2):e.success&&($("#case-buy-num").val(1),alertify(`–í—ã —É—Å–ø–µ—à–Ω–æ –∫—É–ø–∏–ª–∏ ¬´${n}¬ª`,"–£—Å–ø–µ—Ö",1),e=parseInt($(`.garage__items-item[data-item-name="${a}"][data-type="case"] .count`).text()),$(`.garage__items-item[data-item-name="${a}"][data-type="case"] .count`).text(e+t),garage.info(a,5),socket.emit("getAccount"))})})},giftSend:(e,a)=>{if(a){let t=$("#send-gift-user").val();a=$("#send-gift-text").val();t.length?$.post("/api/garage/send-gift",{tologin:t,text:a,id:e},function(e){e.error?alertify(e.error,"–û—à–∏–±–∫–∞",2):e.success&&alertify(`–í—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø–æ–¥–∞—Ä–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ${t}!`,"–£—Å–ø–µ—Ö",1)}):$("#send-gift-user").focus()}else alertify(`
            <div class="send-gift">
                <div class="item">
                    <div>${$(`#garage_special .garage__items-item.active[data-item-name="${e}"] .name`).text()}</div>
                    <div class="price">${$(`#garage_special .garage__items-item.active[data-item-name="${e}"] .price`).html()}</div>
                    <img src="${$(`#garage_special .garage__items-item.active[data-item-name="${e}"] img`).attr("src")}">
                </div>
                <input type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—è" class="input" id="send-gift-user">
                <textarea class="input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∫ –ø–æ–¥–∞—Ä–∫—É" id="send-gift-text" maxlength="300"></textarea>
            </div>
            `,"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ–¥–∞—Ä–æ–∫",0,`<button class="btn" onclick="alertify_close()">–û—Ç–º–µ–Ω–∏—Ç—å</button><button class="btn green" onclick="garage.giftSend(${e}, 1)">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>`,1)},skinBtn1:()=>{$("#skins-btn .skin-btn").removeAttr("onclick"),$("#skins-btn .skin-btn:not(.bts), #skins-btn .bottom-btn-name").toggleClass("active")},skinBtn:()=>{$("#skins-btn .skin-btn:not(.bts), #skins-btn .bottom-btn-name").toggleClass("active"),setTimeout(()=>{$("#skins-btn .skin-btn:not(.bts)").attr("onclick","garage.skinBtn1()")},100)}};function resizeViewer(e){let t;t=$("#garageViewer").is(":visible")?viewer1:viewer2,1==e?t=viewer1:2==e&&(t=viewer2);var e=t.element.offsetWidth,a=t.element.offsetHeight;t.three.renderer&&(t.three.renderer.setSize(e,a),t.three.camera.aspect=e/a,t.three.camera.updateProjectionMatrix())}function garage_tab(e){$(".garage__items").hide(),"containers"==e?($(".garage-main").addClass("big"),pauseGarage(2)):($(".garage-main").removeClass("big"),pauseGarage(1)),resizeViewer(),$("#garage_"+e).show(),$(".garage__nav .nav__item").removeClass("active"),$(`.garage__nav .nav__item[data-id="${e}"]`).addClass("active"),setTimeout(()=>{($(`#garage_${e} .garage__items-item.installed`).length?$(`#garage_${e} .garage__items-item.installed`):$(`#garage_${e} .garage__items-item:first-child`)).click()},1)}function indecreaseNum(e){var t=parseInt($("#garage_containers .garage__items-item.active .price").text().replace(" ","")),a=parseInt($("#case-buy-num").val());if(1==e){if(a<=1)return $("#case-buy-num").val(1),!1;e=a-1;$("#case-buy-num").val(e),$(".case-buy .btn[data-c-btn]").html(`–ö—É–ø–∏—Ç—å ${e} <span>${number_format(e*t)} <kry></kry>`)}else{if(1e3<=a)return $("#case-buy-num").val(1e3),!1;e=a+1;$("#case-buy-num").val(e),$(".case-buy .btn[data-c-btn]").html(`–ö—É–ø–∏—Ç—å ${e} <span>${number_format(e*t)} <kry></kry>`)}}window.addEventListener("resize",resizeViewer,!1),$(document).ready(()=>{garage.get.all()}),$(".garage-intro__items-item, .garage-intro .bigitem").click(function(){var e=$(this).attr("data-item");garage.getItems(e),garage.initgarage2||(viewer2.init(garageObj),garage.initgarage2=!0),pauseGarage(1)}),$(".garage__items").on("mousewheel DOMMouseScroll",function(e){var t=Math.max(-1,Math.min(1,e.originalEvent.wheelDelta||-e.originalEvent.detail));$(this).scrollLeft($(this).scrollLeft()-40*t),e.preventDefault()}),$(".garage__items").kinetic({filterTarget:function(e,t){if(!/down|start/.test(t.type))return!/area|a|input/i.test(e.tagName)},cursor:"default",y:!1}),$(".garage__nav .nav__item").click(function(){garage_tab($(this).attr("data-id"))}),$('.case-buy .btn[data-btn="increase"]').mouseup(function(){clearInterval(pressTimer),clearTimeout(pressTimer1)}).mousedown(function(){indecreaseNum(),pressTimer1=setTimeout(()=>{pressTimer=setInterval(indecreaseNum,100)},100)}),$('.case-buy .btn[data-btn="decrease"]').mouseup(function(){clearInterval(pressTimer),clearTimeout(pressTimer1)}).mousedown(function(){indecreaseNum(1),pressTimer1=setTimeout(()=>{pressTimer=setInterval(()=>indecreaseNum(1),100)},100)}),$("#case-buy-num").on("input",function(){var e,t=parseInt($(this).val());1e3<t||t<=0||(e=parseInt($("#garage_containers .garage__items-item.active .price").text().replace(" ","")),$(".case-buy .btn[data-c-btn]").html(`–ö—É–ø–∏—Ç—å ${t} <span>${number_format(t*e)} <kry></kry>`))});const shop={quest:function(e,t,a){alertify_quest(`–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å ${e} –∑–∞ ${number_format(t)} <coin></coin> ?`,`shop.buy(${t}, '${a}')`)},buy:function(e,t){$.post(`/api/shop/${t}/${e}/shop-buy`,function(e){var t;if(e.success)return alertify("–í—ã —É—Å–ø–µ—à–Ω–æ –∫—É–ø–∏–ª–∏ "+e.success,"–£–°–ü–ï–•",1),e.info.kry&&$("#my-kry").text(number_format(e.info.kry)),$("#my-coin").text(number_format(e.info.coin)),e.info.rank&&(t="rm"+e.info.rank,-1==$(".user-details .rank").attr("class").indexOf(t)&&($(".user-details .rank").removeClass($(".user-details .rank").attr("class").match(/(rm|rmv)\d+/)[0]),$(".user-details .rank").addClass(t))),!1;alertify(e.error,"–û—à–∏–±–∫–∞",2)})}};function pShop(e){page("shop",function(){$("#shop-nav a").removeClass("active"),$(`#shop-nav a[data-id="${e}"]`).addClass("active"),document.querySelector(`.shop-section[data-shop-id="${e}"]`).scrollIntoView({behavior:"smooth"})})}$("#shop-nav a").click(function(){$("#shop-nav a").removeClass("active"),$(this).addClass("active");var e=$(this).attr("data-id");document.querySelector(`.shop-section[data-shop-id="${e}"]`).scrollIntoView({behavior:"smooth"})});const CHATTO_smiles=[":)&01.png",":-)&08.png",";)&02.png",":(&03.png","=)&09.png","=|&04.png",":P:&05.png",":xD:&lol.png",":xd:&lol.png","=/&07.png",":cool:&cool.png",":good:&good.png",":O_o&06.png",":sleep:&sleep.png","\\__\\&10.png","\\___\\&11.png",":like:&like.png",":dislike:&dislike.png",":power:&power.png",":hey:&hey.png",":lol:&lol.png",":love:&heart.png",":flower:&flower.png",":facepalm:&facepalm.png",":mm:&mm.png",":bravo:&bravo.png",":fire:&fire.png",":hearteyes:&hearteyes.png",":hm:&hm.png",":moon:&moon.png",":kiss:&kiss.png",":please:&please.png",":rainbow:&rainbow.png",":okey:&okey.png",":crying:&crying.png",":angel:&angel.png",":repost:&repost.png",":bee:&bee.png",":1st:&1st.png",":2rd:&2rd.png",":3rd:&3rd.png",":ghost:&ghost.png",":koko:&koko.png",":mouse:&mouse.png",":money:&money.png",":vs:&vs.png",":up:&up.png",":down:&down.png",":left:&left.png",":right:&right.png",":nowords:&nowords.png",":sun:&sun.png",":stars:&stars.png",":eyes:&eyes.png",":ura:&ura.png",":ops:&ops.png",":rock:&rock.png",":sos:&sos.png",":mobile:&mob1.png",":omg:&omg.png",":bell:&bell.png",":bheart:&bheart.png",":brheart:&brheart.png",":hmm:&hmm.png",":hstop:&hstop.png",":hz:&hz.png",":uraa:&uraa.png",":uuu:&uuu.png",":tired:&tired.png",":heh:&heh.png",":sad:&sad.png",":wow:&wow.png",":drunk:&drunk.png",":yee:&yee.png",":moneyy:&moneyy.png",":think:&think.png",":funny:&funny.png",":stone:&stone.png",":eyy:&eyy.png",":pin:&pin.png",":boom:&boom.png",":100:&100.png",":00:&05.gif",":01:&02.gif",":02:&03.gif",":03:&04.gif"],CHATTO_COMMANDS=["#rules&–ü—Ä–∞–≤–∏–ª–∞&rules()","#smiles&–°–º–∞–π–ª—ã&smiles()","#help&–ü–æ–º–æ—â—å&help()","#vk&–ù–∞—à–∞ –≥—Ä—É–ø–ø–∞ –≤–∫&window.open('https://vk.com/chatto_ru','_blank')","#shop&–ú–∞–≥–∞–∑–∏–Ω&shop()","#rub&–ü–æ–∫—É–ø–∫–∞ –†–£–ë&donat.window()","#donat&–ü–æ–∫—É–ø–∫–∞ –†–£–ë&donat.window()","#settings&–ù–∞—Å—Ç—Ä–æ–π–∫–∏&window_settings()","#updates&–û–±–Ω–æ–≤–ª–µ–Ω–∏—è&updates()","#online&–û–Ω–ª–∞–π–Ω&online()","#admins&–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è&load_page(9,0)","#lottery&–õ–æ—Ç–µ—Ä–µ—è&LotoL()","#loto&–õ–æ—Ç–µ—Ä–µ—è&LotoL()","#news&–ù–æ–≤–æ—Å—Ç–∏&cChat(1)","#friends&–î—Ä—É–∑—å—è&friends()","#clans&–ö–ª–∞–Ω—ã&getclans()","#fullscreen&–í–æ–π—Ç–∏ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º&toggleFullScreen()","#ranks&–¢–∞–±–ª–∏—Ü–∞ –∑–≤–∞–Ω–∏–π&load_page(12,0)","#–∑–≤–∞–Ω–∏—è&–¢–∞–±–ª–∏—Ü–∞ –∑–≤–∞–Ω–∏–π&load_page(12,0)","#ads&–†–µ–∫–ª–∞–º–∞&load_page(15,1)","#chatscreensize&–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞&load_page(13,0)","#other&–ü—Ä–æ—á–µ–µ&load_page(4,0)","#youtube&YouTube&load_page(14,0)","#ratings&–†–µ–π—Ç–∏–Ω–≥–∏&window.open('/ratings','_blank')","#challenges&–ß–µ–ª–ª–µ–Ω–¥–∂&tasks_challenges()","#uchallenges&–ò–≥—Ä–æ–∫–∏ –≤ —á–µ–ª–ª–µ–Ω–¥–∂–µ&p_challenges()","#tasks&–ó–∞–¥–∞–Ω–∏—è&window_tasks()","#tournaments&–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —Ç—É—Ä–Ω–∏—Ä—ã&tasks_tournaments()","#chatto_donations&–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è&window.open('/donations','_blank')","#crazyweekend&–ë–µ–∑—É–º–Ω—ã–µ –≤—ã—Ö–æ–¥–Ω—ã–µ&window.open('/crazyweekend','_blank')","#exit&–í—ã–π—Ç–∏&game_exit()","#appapk&–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–Ω–¥—Ä–æ–∏–¥&document.location.href='/chatto.apk'","#–≤shop&–ú–∞–≥–∞–∑–∏–Ω–µ&shop()","#–≤admins&–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—é&load_page(9,0)","@–ù–∏–∫&–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è&profile('chatto.ru')","@@–ù–∏–∫&–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è&profile('chatto.ru')"],CHATTO_COMMANDS1=["/rules&–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∞–≤–∏–ª–∞","/smiles&–û—Ç–∫—Ä—ã—Ç—å —Å–º–∞–π–ª—ã","/u –ª–æ–≥–∏–Ω&–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è","/g –ª–æ–≥–∏–Ω&–ü—Ä–æ—Å–º–æ—Ç—Ä –≥–∞—Ä–∞–∂ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è","/ignore –ª–æ–≥–∏–Ω&–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è","/promocode&–û—Ç–∫—Ä—ã—Ç—å –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤","/transfer –ª–æ–≥–∏–Ω –∫—Ä–∏&–ü–µ—Ä–µ–≤–æ–¥ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤","/trsf –ª–æ–≥–∏–Ω –∫—Ä–∏&–ü–µ—Ä–µ–≤–æ–¥ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤","/time&–ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è —á–∞—Ç–∞","/howmuch –ª–æ–≥–∏–Ω&–£–∑–Ω–∞—Ç—å —Å–∫–æ–ª—å–∫–æ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ","/paint –∏–º—è&–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫—Ä–∞—Å–∫–∞–º –≤ –≥–∞—Ä–∞–∂–µ","/vibrate –∑–Ω–∞—á–µ–Ω–∏–µ&–í–∫–ª—é—á–∏—Ç—å –≤–∏–±—Ä–∞—Ü–∏—é –∫–æ–≥–¥–∞ –ø–æ—Å—Ç—É–ø–∞—é—Ç –Ω–æ–≤—ã–µ —Å–º—Å (—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏), –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ 1 –∏–ª–∏ 0 (–≤–∫–ª. –∏–ª–∏ –æ—Ç–∫–ª.)","/blackbg&–î–µ–ª–∞–µ—Ç —Ñ–æ–Ω —á–∞—Ç–∞ —á—ë—Ä–Ω—ã–º","/video link&–°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏–¥–µ–æ","/iFrame link&–°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ –≤ —á–∞—Ç–µ","/uchallenges&–û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ —Å —á–µ–ª–ª–µ–Ω–¥–∂–∞","/showgarage&–ü–æ–∫–∞–∑–∞—Ç—å viewer –≥–∞—Ä–∞–∂–∞ –≤ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–∫—Ä—ã—Ç –ª–∏ –æ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∏–ª–∏ –Ω–µ—Ç","/msvol –∑–Ω–∞—á–µ–Ω–∏–µ&–ò–∑–º–µ–Ω–∏—Ç—å –≥—Ä–æ–º–∫–æ—Å—Ç—å –ø–µ—Å–µ–Ω –≤ —á–∞—Ç–µ, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –≥—Ä–æ–º–∫–æ—Å—Ç—å (–æ—Ç 0 –¥–æ 100) (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)"];for(let t of CHATTO_smiles){let e=t.split("&");$(".smiles__wrapper").append(`<button class="btn" title="${e[0]}" onclick="chat.aText('${e[0]}')"><img src="../assets/smiles/${e[1]}" loading="lazy"></button>`)}const chat={loaded:!1,aText:function(e){ME.settings.smilesclose&&$(".smiles").toggleClass("shown"),$("#text").val($("#text").val()+e)},send:function(){let t=$("#text").val();if(!t)return!1;let e=0;if(1==ME.upperCase&&(e=1),a=t,/^([a-zA-Z–ê-–Ø–Å—ë0-9_\-.]{1,30}); (.*)/gi.test(a)?"SERIAL"!==(n=a.split(";"))&&(t="/to "+n[0]+" "+a.replace(n[0]+"; ","")):!/^([a-zA-Z–ê-–Ø–Å—ë0-9_\-.]{1,30}): (.*)/gi.test(a)||"SERIAL"!==(n=a.split(":"))&&(t="/pm "+n[0]+" "+a.replace(n[0]+": ","")),e){var a=t.split(" ");if("/pm"==a[0]||"/to"==a[0]){var n=t.split(" ");let e=t.replace(n[0]+" "+n[1]+" ","");"h"==e[0]&&"t"==e[1]&&"t"==e[2]&&"p"==e[3]||void 0===e[0]||(t=n[0]+" "+n[1]+" "+e[0].toString().toUpperCase()+e.slice(1))}else"h"==t[0]&&"t"==t[1]&&"t"==t[2]&&"p"==t[3]||(t=t[0].toString().toUpperCase()+t.slice(1))}let s="";-1!==t.toString().search("/to ")?(mylastnickname=(mylastnickname=t.toString().replace("/to ","")).split(" ")[0],s="/to "):-1!==t.toString().search("/pm ")?(mylastnickname=(mylastnickname=t.toString().replace("/pm ","")).split(" ")[0],s="/pm "):mylastnickname="",writeTo=(writeTo="")!==mylastnickname?s+mylastnickname+" ":"",mylastnickname="",lastmsg=t,$("#text").val(writeTo),ME.settings.uppercase&&("h"==t[0]&&"t"==t[1]&&"t"==t[2]&&"p"==t[3]||(t=t[0].toString().toUpperCase()+t.slice(1))),socket.emit("ChatMsg",t)},ask:function(e,t){let a=+new Date,n=($("#chat_messages").prepend(`
        <msg by="sys" id="msg-sys-${a}">
            <text>${e}</text>
        </msg>
        `),5e3);2==t?n=5e3:3==t?n=1e3:4==t&&(n=2e4),setTimeout(()=>$("#msg-sys-"+a).remove(),n)},emojitext:function(a){var e=CHATTO_smiles.length;for(let t=0;t<e;t++){let e=CHATTO_smiles[t].split("&");e[0]=e[0].replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var n=new RegExp(e[0],"g");a=a.replace(n,` <img src="../assets/smiles/${e[1]}" title="${e[0]}"/> `)}return a},process:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/{:rank(.*?)=(.*?):}/g," <i class=\"rank r$1$2\" onclick=\"profile('$3', '$1$2')\"></i> ")).replace(/{:rank(.*?):}/g,' <i class="rank r$1"></i> ')).replace(/{:cUban=(.*?)=(.*?)=(.*?)=(.*?):}/,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {:c-u$1=$2:} –ª–∏—à–µ–Ω –ø—Ä–∞–≤–∞ –≤—ã—Ö–æ–¥–∞ –≤ —ç—Ñ–∏—Ä $3. –ü—Ä–∏—á–∏–Ω–∞: $4, —Å–º. #rules ")).replace(/{:cBuy=(.*?)=(.*?)=(.*?)=(.*?):}/,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {:c-u$1=$2:} –∫—É–ø–∏–ª $3 <y>$4</y>")).replace(/{:cBuy=(.*?)=(.*?)=(.*?):}/,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {:c-u$1=$2:} –∫—É–ø–∏–ª <y>$3</y>")).replace(/{:cBuyS=(.*?)=(.*?)=(.*?):}/,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {:c-u$1=$2:} <a onclick=\"page('shop')\">–∫—É–ø–∏–ª</a> <y>$3</y>")).replace(/{:cLoto=(.*?)=(.*?)=(.*?)=(.*?)-(.*?):}/,'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {:c-u$1=$2:} –ø–æ—Å—Ç–∞–≤–∏–ª <y>$3</y> <kry></kry> –Ω–∞ <a onclick="lotteryPage($4)">$5</a>')).replace(/{:cLotoE=(.*?)=(.*?)=(.*?)=(.*?)=(.*?):}/,'<a onclick="page(\'lottery\')">–õ–æ—Ç–µ—Ä–µ—è</a> –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Å—á–∞—Å—Ç–ª–∏–≤–æ–µ —á–∏—Å–ª–æ: $1 (<b>$2</b>). –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–π: $3, –∫–∞–∂–¥—ã–π –ø–æ–ª—É—á–∞–µ—Ç –ø–æ <y>$4</y> <kry></kry><div class="users-msg">$5</div>')).replace(/{:cLotoE1=(.*?)=(.*?)=(.*?)=(.*?)=(.*?):}/,'<a onclick="page(\'lottery\')">–õ–æ—Ç–µ—Ä–µ—è</a> –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Å—á–∞—Å—Ç–ª–∏–≤–æ–µ —á–∏—Å–ª–æ: $1 (<b>$2</b>). –ü–æ–±–µ–¥–∏—Ç–µ–ª—å: $3, –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç <y>$4</y> <kry></kry><div class="users-msg">$5</div>')).replace(/{:cLotoE=(.*?)=(.*?):}/,"<a onclick=\"page('lottery')\">–õ–æ—Ç–µ—Ä–µ—è</a> –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Å—á–∞—Å—Ç–ª–∏–≤–æ–µ —á–∏—Å–ª–æ: $1 (<b>$2</b>). –ü–æ–±–µ–¥–∏—Ç–µ–ª–µ–π –Ω–µ—Ç.")).replace(/{:cTask=(.*?)=(.*?)=(.*?)=(.*?):}/,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {:c-u$1=$2:} –≤—ã–ø–æ–ª–Ω–∏–ª –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ <b>¬´$3¬ª</b> –∏ –ø–æ–ª—É—á–∏–ª <y>$4</y>")).replace(/{:cGiftSend=(.*?)=(.*?)=(.*?)=(.*?)=(.*?):}/,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {:c-u$1=$2:} –æ—Ç–ø—Ä–∞–≤–∏–ª –ø–æ–¥–∞—Ä–æ–∫ <y>¬´$5¬ª</y> –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {:c-u$3=$4:}")).replace(/{:cClanBuy=(.*?)=(.*?)=(.*?)=(.*?):}/,'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {:c-u$1=$2:} —Å–æ–∑–¥–∞–ª –∫–ª–∞–Ω <a onclick="clan($5)">$3</a>')).replace(/{:cClanDonate=(.*?)=(.*?)=(.*?)=(.*?)=(.*?):}/,'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {:c-u$1=$2:} –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–ª <y>$3</y> :kry: –∫–ª–∞–Ω—É <a onclick="clan($5)">$4</a>')).replace(/{:cClanRemove=(.*?)=(.*?)=(.*?):}/,"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {:c-u$1=$2:} —É–¥–∞–ª–∏–ª –∫–ª–∞–Ω <y>$3</y>")).replace(/{:chatto-gold-soon=(.*?)=(.*?):}/g,'<div class="chatto-gold soon"> <div> <div class="gold-user"> <i class="rank r$1" onclick="profile(\'$2\')"></i> <user>$2</user></div> –°–±—Ä–æ—Å–∏–ª –∑–æ–ª–æ—Ç–æ–π —è—â–∏–∫! </div> </div>')).replace(/{:chatto-gold-soon:}/g,'<div class="chatto-gold soon">–°–∫–æ—Ä–æ –±—É–¥–µ—Ç —Å–±—Ä–æ—à–µ–Ω –∑–æ–ª–æ—Ç–æ–π —è—â–∏–∫!</div>')).replace(/{:chatto-ugold-soon:}/g,'<div class="chatto-gold soon ultra">–°–∫–æ—Ä–æ –±—É–¥–µ—Ç —Å–±—Ä–æ—à–µ–Ω –£–õ–¨–¢–†–ê-–ì–û–õ–î!</div>')).replace(/{:chatto-gold=(.*?)=(.*?)=(.*?):}/g,`<div class="chatto-gold"><div> <div class="gold-user"> <i class="rank r$1" onclick="profile('$2')"></i> <user>$2</user></div> –ü–æ–π–º–∞–ª –∑–æ–ª–æ—Ç–æ–π —è—â–∏–∫ –∏ –ø–æ–ª—É—á–∏–ª $3 <kry></kry> </div></div>`)).replace(/{:chatto-ugold=(.*?)=(.*?)=(.*?):}/g,`<div class="chatto-gold"><div> <div class="gold-user"> <i class="rank r$1" onclick="profile('$2')"></i> <user>$2</user></div> –ü–æ–π–º–∞–ª –£–õ–¨–¢–†–ê-–ì–û–õ–î –∏ –ø–æ–ª—É—á–∏–ª $3 <kry></kry> </div></div>`)).replace(/{:c-user=(.*?):}/g,"<user ondblclick=\"profile('$1')\">$1</user>")).replace(/{:c-u(.*?)=(.*?):}/g,"<user><i class=\"rank r$1\" onclick=\"profile('$2', '$1')\"></i>$2</user>")).replace(/{:cCont=(.*?)=(.*?)=(.*?)=(.*?):}/,'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å <user><i class="rank r$1" onclick="profile(\'$2\')"></i>$2</user> –æ—Ç–∫—Ä—ã–ª <b>¬´$3¬ª</b> –∏ –ø–æ–ª—É—á–∏–ª <y>$4</y>')).replace(/\{:c-y=(.*?)\:}/g,'<span class="yellow">$1</span>')).replace(/\{:c-o=(.*?)\:}/g,'<a onclick="openlink(\'$1\')" title="–ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –≤–Ω–µ—à–Ω–µ–π —Å—Å—ã–ª–∫–µ">$1</a>')).replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g,"<a onclick=\"openlink('$1')\">$1</a> ")).replace(/#rules/,'<a onclick="rules()">–ü—Ä–∞–≤–∏–ª–∞</a>'),e=(e=this.emojitext(e)).replace(/:kry:/,"<kry></kry>")},firstLoad:!0,add:function(e){if(e.error)return e.error=chat.process(e.error),chat.ask(e.error),!1;for(var l of e){var c=l._id;if(!$("#msg"+c).length){let e;var d=l.login,g=chat.process(l.text),u=l.user_msg;let t=l.user_rank;var m=l.user1_rank;0<l.user_vip&&(t="v"+t);let a=new Date(l.time);var p=a.getHours()<10?"0"+a.getHours():a.getHours(),f=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),p=(a=p+":"+f,l.tologin);let n=p?' class="tologin"':"",s=(p==ME.login&&(n=' class="tologin to"'),1==l.pm&&(n=' class="tologin pm"'),l.group),i="",r=("4"==s?i='<span class="group-icon icon-helper" tooltip="–ö–∞–Ω–¥–∏–¥–∞—Ç" flow="right"></span>':"3"==s?i='<span class="group-icon icon-adminb" tooltip="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä/—Å–æ–∑–¥–∞—Ç–µ–ª—å/—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —á–∞—Ç–∞" flow="right"></span>':"2"==s&&(i='<span class="group-icon icon-moderator" tooltip="–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä —á–∞—Ç–∞" flow="right"></span>'),""),o=(l.clan&&(f=l.clan.split("|"),r=`<span class="name" onclick="clan(${f[0]})">[${f[1]}]</span> `),"");1<ME.group&&(o=`
                    <div class="icon-remove" tooltip="–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ ${a}" flow="right" onclick="chat.del(${c})"></div>
                `,"sys"!==d&&(o+=`<div class="icon-ban" tooltip="–ó–∞–±–∞–Ω–∏—Ç—å ${d} –Ω–∞ 5 –º–∏–Ω—É—Ç –∑–∞ —Ñ–ª—É–¥" flow="right" onclick="chat.ban('${d}',5,'1.1');"></div>`)),e=p?`
                <msg by="${d}" id="msg${c}"${n}>
                    ${o}
                    <i class="rank r${t}" onclick="profile('${d}', '${t}')"></i>
                    <span class="name" onclick="profile('${d}', '${t}')">${d} (${u})</span>
                    <span class="devider"> ‚Äî </span>
                    <i class="rank r${m}" onclick="profile('${p}', '${t}')"></i>
                    <span class="name" onclick="profile('${p}',10,0)">${p}</span>
                    <text>${g}</text>
                </msg>
                `:`
                <msg by="${d}" id="msg${c}">
                    ${o}
                    <i class="rank r${t}" onclick="profile('${d}', '${t}')"></i>${i}${r}
                    <span class="name" onclick="profile('${d}', '${t}')">${d} (${u})</span>
                    <text>${g}</text>
                </msg>
                `,9==l.group&&(e=`
                <msg by="${d}" id="msg${c}">
                    ${o}
                    <text>${g}</text>
                </msg>
                `),chat.firstLoad?$("#chat_messages").append(e):$("#chat_messages").prepend(e),50<$("#chat_messages msg").length&&$("#chat_messages msg:last")[0].remove(),chat.loaded=!0}}chat.firstLoad&&(chat.firstLoad=!1),autoIgnore()},del:function(e){ME.group<2?alertify("–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞!"):socket.emit("ChatMsgDel",e)},ban:function(e,t,a){ME.group<2?alertify("–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞!"):socket.emit("ChatMsg",`/ban ${e} ${t} `+a)}};function tologin(e){e=(e=e.toString()).replace(/(<s>|<\/s>)/g,"");var t,a=$("#text").val(),n=a.split(" ");"/to"==n[0]?n[1]!==e?(t="/to "+e+" "+(t=a.replace("/to "+n[1]+" ","")),$("#text").val(t)):$("#text").val($("#text").val()):"/pm"==n[0]?n[1]!==e?(t="/to "+e+" "+(t=a.replace("/pm "+n[1]+" ","")),$("#text").val(t)):(n="/to "+e+" "+(n=a.replace("/pm "+e+" ","")),$("#text").val(n)):$("#text").val("/to "+e+" "+$("#text").val()),$("#text").focus()}function pm(e){e=(e=e.toString()).replace(/(<s>|<\/s>)/g,"");var t,a=$("#text").val(),n=a.split(" ");"/pm"==n[0]?n[1]!==e?(t="/pm "+e+" "+(t=a.replace("/pm "+n[1]+" ","")),$("#text").val(t)):$("#text").val($("#text").val()):"/to"==n[0]?n[1]!==e?(t="/pm "+e+" "+(t=a.replace("/to "+n[1]+" ","")),$("#text").val(t)):(n="/pm "+e+" "+(n=a.replace("/to "+e+" ","")),$("#text").val(n)):$("#text").val("/pm "+e+" "+$("#text").val()),$("#text").focus()}function to(e){tologin(e)}function MyLastMsg(){var e=lastmsg;$("#text").val(e),console.log("My Last msg: "+e)}function lotteryPage(e){page("lottery",function(){clearInterval(countdown_interval),$(".lottery .timer").addClass("hidden"),socket.emit("getLottery",e),$("#loto-nav a").removeClass("active"),$(`#loto-nav a[data-id="${e}"]`).addClass("active")})}socket.on("ChatMsg",function(e){chat.add(e)}),socket.on("ChatMsgDel",function(e){console.log("ChatMsgDel:",e),e&&(0==e.login?"all"==e.id?$("msg"):$("#msg"+e.id):$(`msg[by="${e.login}"]`)).remove()}),socket.on("ChatMsgSys",function(e){console.log("ChatMsgSys:",e),e&&chat.ask(e.message,5)}),$("#text").on("keyup",e=>{"Enter"!==e.key&&13!==e.keyCode||chat.send()}),$("#chat-send").click(chat.send),$("#aside-select").on("change",function(){"1"==$(this).val()?($("#aside-news").hide(),$("#aside-chat").show()):($("#aside-chat").hide(),$("#aside-news").show())}),$("#smiles").click(()=>{$(".smiles").toggleClass("shown")}),socket.on("lottery",function(n){if($("#page-lottery").is(":visible"))if(n.error)alertify(n.error,"–û—à–∏–±–∫–∞!",2);else{if(n.success){var s=Number($("#loto-input").val());let e=lottery.type;1==e?e="–ó–µ–ª—ë–Ω—ã–π":2==e?e="–ö—Ä–∞—Å–Ω—ã–π":3==e&&(e="–°–∏–Ω–∏–π"),alertify(`–í—ã —É—Å–ø–µ—à–Ω–æ –ø–æ—Å—Ç–∞–≤–∏–ª–∏ ${number_format(s)} –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤ –Ω–∞ `+e,"–£—Å–ø–µ—Ö!",1),$("#loto-input").val("")}if(n.roomId){var i;lottery.room=n.roomId,$('.wheel .list li.green span[data-id="green"], .loto-users-list.green .bank div').html(number_format(n.bank_green)+" <kry></kry>"),$('.wheel .list li.red span[data-id="red"], .loto-users-list.red .bank div').html(number_format(n.bank_red)+" <kry></kry>"),$('.wheel .list li.blue span[data-id="blue"], .loto-users-list.blue .bank div').html(number_format(n.bank_blue)+" <kry></kry>"),$("#lottery_bank").text(number_format(n.current_bank)),$("#lottery_totalbank").text(number_format(n.bank)),$("#lottery_number").text(number_format(n.number)),1==n.started&&(s=Math.floor((new Date(n.end).getTime()-Date.now())/1e3),$(".lottery .timer").removeClass("hidden"),countdown(s,e=>$(".lottery .timer").text(e),()=>$(".lottery .timer").addClass("hidden"))),$("#loto-input").attr("placeholder",`–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞: ${number_format(n.min)} –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤`);let e="",t="",a="";for(i of n.users){var r=`
            <tr>
                <td>
                    <div class="rank r${i.rank}"></div>
                    <span onclick="profile('${i.login}', '${i.rank}')" class="user">${i.login}</span>
                </td>
                <td>${number_format(i.kry)} <kry></kry></td>
            </tr>`;1==i.type?e+=r:2==i.type?t+=r:3==i.type&&(a+=r)}$("#lottery-table-green tbody").html(e),$("#lottery-table-red tbody").html(t),$("#lottery-table-blue tbody").html(a)}console.log(n)}}),socket.on("lotteryStarted",e=>{e=Math.floor((new Date(e).getTime()-Date.now())/1e3),$(".lottery .timer").removeClass("hidden"),countdown(e,e=>$(".lottery .timer").text(e),()=>$(".lottery .timer").addClass("hidden")),console.log(e)}),socket.on("lotteryEnd",e=>{$(".wheel .list li span, .loto-users-list .bank div").html("0 <kry></kry>"),$("#lottery_bank").text(0),$(".loto-users-wrapper table tbody").empty(),$(".window").css("right","0")}),socket.on("lotteryWheel",e=>{spin(e),console.log("Wins: "+e)});const lottery={room:1,type:1};function lotteryGo(e){var t=Number($("#loto-input").val());t<=0||e<=0||3<e||(lottery.type=e,socket.emit("lottery",{room:lottery.room,type:e,kry:t}))}function spin(e){$(".window").css({right:"0"});let t=0;1==e?t=2380:2==e?t=2520:3==e&&(t=2660),t+=.4,$(".window").animate({right:t},2e3)}$(document).ready(function(){for(i=0;i<5;i++)$(".list li").clone().appendTo(".list")});const Clan={id:0,access:0,exit:e=>{e?$.post(`/api/clans/${Clan.id}/leave`,function(e){e.error?alertify(e.error,"–û—à–∏–±–∫–∞",2):e.success&&(page("clans"),alertify(e.success,"–£—Å–ø–µ—Ö",1))}):5==Clan.access?alertify_quest("–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏ –∏–∑ –∫–ª–∞–Ω–∞? –ï—Å–ª–∏ –≤—ã –≤—ã–π–¥–∏—Ç–µ –∏–∑ –∫–ª–∞–Ω–∞ –∫–ª–∞–Ω –±—É–¥–µ—Ç –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–Ω–æ —É–¥–∞–ª—ë–Ω!","Clan.exit(1)"):alertify_quest("–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏ –∏–∑ –∫–ª–∞–Ω–∞?","Clan.exit(1)")},donate:e=>{if(e){let a=$("#donation-input").val();a<1e3||isNaN(a)?alertify("–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ: 1000 –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤!","–û—à–∏–±–∫–∞",2):1e5<a?alertify("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞–∑–æ–≤–æ–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç: 100 000 –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤!","–û—à–∏–±–∫–∞",2):$.post(`/api/clans/${Clan.id}/${a}/donate`,function(e){var t;e.error?alertify(e.error,"–û—à–∏–±–∫–∞",2):e.success&&(t=parseInt($(".clan-kry").text().replace(" ","")),t+=parseInt(a),$(".clan-kry").text(number_format(t)),alertify(e.success,"–£—Å–ø–µ—Ö",1)),$("#donation-input").val("")})}else alertify('<div class="font-13 mtn-20 text-left">–°–∫–æ–ª—å–∫–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å –∫–ª–∞–Ω—É?</div> <input id="donation-input" class="input" type="number" placeholder="–û—Ç 1000">',"–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ",0,'<div class="flex between mtn-20 gap-10 w-full p-0-10"><button class="btn w-full" onclick="alertify_close()">–û—Ç–º–µ–Ω–∏—Ç—å</button><button class="btn green" onclick="Clan.donate(1)">–ü–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å</button></div>')},sendRequest:()=>{$("#clan-action").off("click"),$.post(`/api/clans/${Clan.id}/request`,function(e){e.error?alertify(e.error,"–û—à–∏–±–∫–∞",2):e.success&&(alertify("–í—ã —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∞–ª–∏ –∑–∞—è–≤–∫—É –≤ –∫–ª–∞–Ω!","–£—Å–ø–µ—Ö",1),$("#clan-action").text("–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞").attr("disabled","disabled"))})},getRequests:()=>{},changeRequest:(t,a)=>{$.post(`/api/clans/${Clan.id}/${t}/${a}/request`,function(e){e.error?alertify(e.error,"–û—à–∏–±–∫–∞",2):e.success&&(1==t?($("#clanRequest-"+a).remove(),alertify(`–í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–Ω—è–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${a} –≤ –∫–ª–∞–Ω!`,"–£—Å–ø–µ—Ö",1),clan(Clan.id)):($("#clanRequest-"+a).remove(),e=parseInt($('#oneclan-nav a[data-id="2"]').text().replace("–ó–∞—è–≤–∫–∏ (","").replace(")","")),e--,$('#oneclan-nav a[data-id="2"]').text(`–ó–∞—è–≤–∫–∏ (${e})`)))})},changeRank:(e,n)=>{$.post(`/api/clans/${Clan.id}/${n}/${e}/clan-rank`,function(a){if(a.error)alertify(a.error,"–û—à–∏–±–∫–∞",2);else if(a.success){let t=a.success.split("|");if("–ö–∏–∫"==t[0]){$("#clan-usersIn-"+n).remove();$("#clan-users").text()}else{let e;0==t[0]?e="–†—è–¥–æ–≤–æ–π":1==t[0]?e="–û—Ñ–∏—Ü–µ—Ä":2==t[0]?e="–°–µ—Ä–∂–∞–Ω—Ç":3==t[0]?e="–í–µ—Ç–µ—Ä–∞–Ω":4==t[0]&&(e="–ö–æ–º–∞–Ω–¥–∏—Ä");a=0==t[0]?e="–†—è–¥–æ–≤–æ–≥–æ":e+"a";t[1]=t[1].replace(`<<${t[0]}>>`,a),$(`#clan-usersIn-${n} td:nth-child(2)`).text(e),0==t[0]?$(`#clan-usersIn-${n} td:last-child .text-danger`).text("–ö–∏–∫–Ω—É—Ç—å"):$(`#clan-usersIn-${n} td:last-child .text-danger`).text("–ü–æ–Ω–∏–∑–∏—Ç—å"),4<=t[0]||4==Clan.access&&3<=t[0]?$(`#clan-usersIn-${n} td:last-child .text-success`).attr("disabled","disabled"):$(`#clan-usersIn-${n} td:last-child .text-success`).removeAttr("disabled")}alertify(t[1],"–£—Å–ø–µ—Ö",1)}})},getClan:e=>{$.get(`/api/clans/${e}/getclan`,function(n){if(n.error)alertify(n.error,"–û—à–∏–±–∫–∞!",2);else{Clan.id=n.clanId,Clan.access=n.access;$("#oneclan .clan-info .clan-title").text(n.name),$("#oneclan .clan-info #clan-teg b").text("["+n.teg+"]"),$("#oneclan .clan-info #clan-date").text("–°–æ–∑–¥–∞–Ω: "+n.date),$("#oneclan .clan-info #clan-users").text("–ò–≥—Ä–æ–∫–∏: "+n.users.length+"/"+n.maxUsers),$("#oneclan .clan-info .clan-messages").text(n.messages);var e=n.by.split("|");$("#oneclan .clan-info .clan-by a").html(`<i class="rank r${e[0]}"></i>`+e[1]).attr("onclick",`profile('${e[1]}', '${e[0]}')`),$("#oneclan .clan-info .clan-kry").text(number_format(n.kry)),$("#oneclan .clan-info .clan-bans").text(n.violations),$("#oneclan .clan-info .description").html(n.description),$("#oneclan .clan-info .clan-logo").attr("src","https://awpbajxiyo.cloudimg.io/height/200/n/"+n.logo),$("#clans").addClass("hidden"),$("#oneclan").removeClass("hidden"),1==n.in_clan?$("#clan-action").text("–ü–æ–∫–∏–Ω—É—Ç—å –∫–ª–∞–Ω").removeAttr("disabled").attr("onclick","Clan.exit()"):n.myRequest?$("#clan-action").text("–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞").attr("disabled","disabled"):$("#clan-action").text("–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É").removeAttr("disabled").attr("onclick","Clan.sendRequest()");if(3<n.access){$("#clan-usersAction").removeClass("hidden"),$("#oneclan-nav").removeClass("hidden"),$('#oneclan-nav a[data-id="2"]').click(()=>{$("#table-clanUsers").addClass("hidden"),$("#table-clanRequests").removeClass("hidden"),$("#oneclan-nav a").removeClass("active"),$('#oneclan-nav a[data-id="2"]').addClass("active")}),$('#oneclan-nav a[data-id="1"]').click(()=>{$("#table-clanRequests").addClass("hidden"),$("#table-clanUsers").removeClass("hidden"),$("#oneclan-nav a").removeClass("active"),$('#oneclan-nav a[data-id="1"]').addClass("active")});let e="",t=0;if(n.requests){t=n.requests.length;for(var a of n.requests){var s=a.login.split("|"),i=`<i class="rank r${s[0]}"></i>`;e+=`
                        <tr id="clanRequest-${s[1]}">
                            <td>
                                <a class="user" onclick="profile('${s[1]}', '${s[0]}')">${i} ${s[1]}</a>
                            </td>
                        <td>${a.date}</td>
                        <td class="flex gap-10">
                            <button class="btn btn-sm text-success" onclick="Clan.changeRequest(1, '${s[1]}')">–ü—Ä–∏–Ω—è—Ç—å</button>
                            <button class="btn btn-sm text-danger" onclick="Clan.changeRequest(2, '${s[1]}')">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
                        </td>
                        </tr>
                        `}$("#table-clanRequests tbody").html(e)}$('#oneclan-nav a[data-id="2"]').text(`–ó–∞—è–≤–∫–∏ (${t})`)}$("#clan-donation").attr("onclick","Clan.donate()");let t="";for(const l of n.users){var r=l.login.split("|"),o=`<i class="rank r${r[0]}"></i>`;let a="";if(3<n.access){let e="–ö–∏–∫–Ω—É—Ç—å",t=(0<l.group&&(e="–ü–æ–Ω–∏–∑–∏—Ç—å"),"");(4<=l.group||4==n.access&&3<=l.group)&&(t='disabled="disabled" '),a=`
                    <td class="flex gap-10">
                        <button ${t}class="btn btn-sm text-success" onclick="Clan.changeRank(1, '${r[1]}')">–ü–æ–≤—ã—Å–∏—Ç—å</button>
                        <button class="btn btn-sm text-danger" onclick="Clan.changeRank(2, '${r[1]}')">${e}</button>
                    </td>
                    `,ME.login==r[1]&&(a="<td></td>")}let e=l.group;e&&0!=e?1==e?e="–û—Ñ–∏—Ü–µ—Ä":2==e?e="–°–µ—Ä–∂–∞–Ω—Ç":3==e?e="–í–µ—Ç–µ—Ä–∞–Ω":4==e?e="–ö–æ–º–∞–Ω–¥–∏—Ä":5==e&&(e="–ì–ª–∞–≤–Ω–æ–∫–æ–º–∞–Ω–¥—É—é—â–∏–π"):e="–†—è–¥–æ–≤–æ–π",t+=`
                <tr id="clan-usersIn-${r[1]}">
                    <td>
                        <a class="user" onclick="profile('${r[1]}', '${r[0]}')">${o} ${r[1]}</a>
                    </td>
                    <td>${e}</td>
                    <td>${number_format(l.earned)} <kry></kry></td>
                    <td>${l.lastAuth}</td>
                    <td>${l.lastAuth}</td>
                    ${a}
                </tr>
                `}$("#table-clanUsers tbody").html(t),page("clansOne")}})}},clan=e=>{Clan.getClan(e)},Tasks={rewards:[["–ö—Ä–∏—Å—Ç–∞–ª–ª—ã","assets/img/kry_big.webp"],["–ó–æ–ª–æ—Ç–æ–π —è—â–∏–∫","assets/img/g-gold.webp"]],render(e){var n,s;let i="";for([n,s]of Object.entries(e)){let e="",t="",a="";e=s.current>=s.need?(t=" done",`<button class="quest-change success" onclick="Tasks.getReward(${n})">–ó–∞–±—Ä–∞—Ç—å –ø—Ä–∏–∑</button><i class="done"></i>`):`
                <button class="quest-change" onclick="alertify_quest('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —Å–º–µ–Ω–∏—Ç—å —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ –∑–∞ 999 <kry></kry> ?', 'Tasks.change(${n})')">
                    –°–º–µ–Ω–∏—Ç—å <span class="num">999</span> <kry></kry>
                </button>
                `;var r=new Date(s.timer).getTime();r>Date.now()&&(t=" blocked",a=`data-blocked="${remaining(r,1)}"`),i+=`
            <div class="quests__item${t}"${a}>
                <div class="quests__item-pretitle">–ó–∞–¥–∞–Ω–∏–µ</div>
                <img src="${s.img}" alt="">
                <div class="title">
                    <div class="quest-name">${s.name}</div>
                    <div class="progress-title">${Math.min(s.current,s.need)} / ${s.need}</div>
                </div>
                <div class="progress">
                    <div style="width: ${Math.min(100*s.current/s.need,100)}%"></div>
                </div>
                <div class="prize">
                    <div class="prize__title">–ü—Ä–∏–∑</div>
                    <div class="prize__img">
                        <div class="prize__img-title">
                            <div>${this.rewards[s.reward[0]][0]}</div>
                            <div class="prize-amount">x${s.reward[1]}</div>
                        </div>
                        <img src="${this.rewards[s.reward[0]][1]}" alt="">
                    </div>
                </div>
                ${e}
            </div>
            `}$(".quests").html(i)},change(e){$.post("/api/tasks/change/"+e,e=>{alertify_close(),void 0!==e.error?alertify(e.error,"–û—à–∏–±–∫–∞",2):(socket.emit("getAccount"),this.render(e.success))})},getReward(e){$.post("/api/tasks/getreward/"+e,e=>{void 0!==e.error?alertify(e.error,"–û—à–∏–±–∫–∞",2):(socket.emit("getAccount"),this.render(e.success),alertify("–ù–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞!","–£—Å–ø–µ—Ö",1))})},start(){$.post("/api/tasks/start",e=>{void 0!==e.error?alertify(e.error,"–û—à–∏–±–∫–∞",2):($(".quests-start").remove(),this.render(e.success),ME.hasTasks=!0)})},load(){$.get("/api/tasks/get",e=>{void 0!==e.error?"–ó–∞–¥–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã!"!==e.error&&alertify(e.error,"–û—à–∏–±–∫–∞",2):this.render(e.success)})}},Settings={me:{showmenu:0,showviewer:0,smilesclose:0,uppercase:0,ambientSound:0,goldSound:0,caseSound:0,theme:0},update(t,a,n){$.post("/api/settings/"+t,{value:a},e=>{e.success&&($("#settings_"+t).parent().addClass("saved"),setTimeout(()=>{$("#settings_"+t).parent().removeClass("saved")},1e3),"ambientSound"==t&&("1"==a?(sounds.ambientSound.src="../assets/ambient_garage.mp3",sounds.ambientSound.play()):sounds.ambientSound.pause()),n&&n(e))})},checkbox(){$(`#settings_showmenu,
                      #settings_showviewer,
                      #settings_smilesclose,
                      #settings_uppercase,
                      #settings_ambientSound,
                      #settings_goldSound,
                      #settings_caseSound
                    `).change(function(){var e=$(this).attr("id").replace("settings_",""),t=$(this).is(":checked")?1:0;Settings.update(e,t),ME.settings[e]=t})},theme(e){let t=ME.settings.theme||0;e&&(t=e),$("#theme-select").val(t),0==t?t="":1==t?t="green":2==t?t="teal":3==t?t="darkblue":4==t&&(t="dark"),$("body").removeClass("green teal darkblue dark").addClass(t)}};Settings.checkbox(),$(".select-item").click(function(){$(".select-item").toggleClass("open")}),$("#settings-nav a").click(function(){var e=$(this).attr("data-id");$("#settings-nav a").removeClass("active"),$(this).addClass("active"),$("#settings-game, #settings-interface, #settings-account, #settings-others").addClass("hidden"),$("#settings-"+e).removeClass("hidden")}),$("#theme-select").on("change",function(){var e=$(this).val();Settings.update("theme",e),Settings.theme(e)}),Settings.theme();